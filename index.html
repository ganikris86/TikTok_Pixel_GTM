<!DOCTYPE html>
<html>
    <head>

        <title>Pixel - GTM | Store</title>
	    
	<!-- Google Tag Manager -->
	<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
	new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
	j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
	'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
	})(window,document,'script','dataLayer','GTM-P48HVMV');</script>
	<!-- End Google Tag Manager -->
	    
    </head>
	<body>
		
	<!-- Google Tag Manager (noscript) -->
	<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-P48HVMV"
	height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
	<!-- End Google Tag Manager (noscript) -->
		
	<div class="content">
		<header>
			<h1 class="title">Hello World | Store</h1>
			<div class="cart">
				Items In Cart:<input type="number" id="cart-items" width="10" height="10" value="0">
			</div>
		</header>
		
	   <container>
          <div>
            Logged in as email@example.com
          </div>
       </container>

	    <table>
	    	<tr>
	    		<td>
       				<div class="box"> 
       					<div class="item-title-1">Product 1</div> 
       					<div class="item-product-id-1">Product ID: 5678AB</div>
                        <div class="item-price-1">$29.99</div>

                        <button onclick="viewContent('Product 1','5678AB',29.99)">View Content Details</button> 
                        <button id="add-to-cart-button-1" onclick="addToCart('Product 1','5678AB',29.99)">Add To Cart</button>
       				</div>
       			</td>
                <td>
                	<div class="box">
	                	<div class="item-title-2">Product 2</div> 
	                	<div class="item-product-id-2">Product ID: 6521FJ</div>
	                    <div class="item-price-2">$49.99</div>

	                    <button onclick="viewContent('Product 2','6521FJ',49.99)">View Content Details</button> 
	                    <button id="add-to-cart-button-2" onclick="addToCart('Product 2','6521FJ',49.99)">Add To Cart</button>
	                </div>
                </td>
         		<td>
         			<div class="box">
	         			<div class="item-title-3" class="shop-item-title">Product 3</div> 
	         			<div class="item-product-id-2">Product ID: 4098MD</div>
	                    <div class="item-price-2" class="shop-item-price">$199.99</div>

	                    <button onclick="viewContent('Product 3','4098MD',199.99)">View Content Details</button> 
	                    <button id="add-to-cart-button-3" onclick="addToCart('Product 3','4098MD',199.99)">Add To Cart</button> 
	                </div>
         		</td>
         	</tr>
        </table>

        <button class="checkout" onclick="initiateCheckout()">Initiate Checkout</button>

        <footer>

        </footer>

    </div>

        <!-- BEGIN TIKTOK PIXEL EVENT FUNCTIONS SCRIPT SECTION -->
        <script>
		
		// GTM - START
		// Initialize the data layer as an array or if there is an existing data layer, use it
		window.dataLayer = window.dataLayer || [];		
		// GTM - END
		
        	// BEGIN DO NOT EDIT SECTION 
        	completeRegistration();
        	// END DO NOT EDIT SECTION 

        	function completeRegistration() {
	        	// BEGIN DO NOT EDIT SECTION 
	        	alert("Required Registration Step" + 
	        		   "\n" + "Email address provided is email@example.com");

	        	alert("Required Registration Step" + 
	        		   "\n" + "Phone number provided +15551234567");

	        	var phone = "+15551234567";
	        	var email = "email@example.com";

	        	console.log("email: " + email);
	        	console.log("phone: " + phone);
	        	// END DO NOT EDIT SECTION 

        	}		
        	

        	
        	function addToCart(title, productId, price) { 
        		// BEGIN HINT: UTILIZE THESE VARIABLES WHEN CONSTRUCTING YOUR CORRESPONDING TIKTOK PIXEL EVENTS 
        		console.log("addToCart Function")
        		console.log("title:" + " " + title);
        		console.log("price:" + " " + price);
        		console.log("productId:" + " " + productId);
        		// END HINT: UTILIZE THESE VARIABLES WHEN CONSTRUCTING YOUR CORRESPONDING TIKTOK PIXEL EVENTS 

			// GTM - START
			window.dataLayer.push({
			   'event': 'AddToCart',	
			   'content_id': productId,
			   'content_type': 'product',
			   'content_name' : 'Kids',
			   'price': price,
			   'quantity': 1,
			   'currency': 'AUD',
			   'value': price,
			   'sha256_email': '0c7e6a405862e402eb76a70f8a26fc732d07c32931e9fae9ab1582911d2e8a3b', 
			   'sha256_phone_number': '9f7ec22d72092cd3c0b58726ed9c2d91b92e51a3f29837508fb2948bb22dd2fd'
			});
			// GTM - END
			
        		// BEGIN DO NOT EDIT SECTION 
        		if (title == "Product 1") {
        			document.getElementById("add-to-cart-button-1").disabled = 'true';
        		} else if (title == "Product 2") {
        			document.getElementById("add-to-cart-button-2").disabled = 'true';
        		} else if (title == "Product 3") {
        			document.getElementById("add-to-cart-button-3").disabled = 'true';
        		}
        		document.getElementById("cart-items").stepUp();
        		// END DO NOT EDIT SECTION 
	
        	}

        	function viewContent(title, productId, price) {
        	    // BEGIN DO NOT EDIT SECTION 
        	    alert("Mock Product Item Details Popup: " 
        	    	+ "\n" + "title: " + title 
        	    	+ "\n" + "price: " + price 
        	    	+ "\n" + "productId: " +  productId)
        	    // END DO NOT EDIT SECTION 

        		// BEGIN HINT: UTILIZE THESE VARIABLES WHEN CONSTRUCTING YOUR CORRESPONDING TIKTOK PIXEL EVENT
        		console.log("viewContent Function")
        		console.log("title:" + " " + title);
        		console.log("price:" + " " + price);
        		console.log("productId:" + " " + productId);
        		// END HINT: UTILIZE THESE VARIABLES WHEN CONSTRUCTING YOUR CORRESPONDING TIKTOK PIXEL EVENT

        	}

        	function registrationComplete(email, phone) {
        		// BEGIN HINT: UTILIZE THESE VARIABLES WHEN CONSTRUCTING YOUR CORRESPONDING TIKTOK PIXEL EVENT
        		console.log("registrationComplete Function")
        		console.log("email:" + " " + email);
        		console.log("phonenumber:" + " " + phone);
        		// END HINT: UTILIZE THESE VARIABLES WHEN CONSTRUCTING YOUR CORRESPONDING TIKTOK PIXEL EVENT


        		// BEGIN DO NOT EDIT SECTION 
        	    alert("Registration Complete");
        	    // END DO NOT EDIT SECTION 
        	}

        	function initiateCheckout() {
        		var retVal = confirm("This is a pop up meant to be a mock initiate checkout step - clicking OK will assume that the correct payment information was entered by the customer. Purchase will then complete successfully. HINT: Clicking Cancel should not trigger any events");

        		if (retVal === true) { 

                // BEGIN DO NOT EDIT SECTION 
        		   completePayment();
        		} else {	
        		   alert("Payment step cancelled!");
                   return false;    
        		}
        		// END DO NOT EDIT SECTION 
        	}

        	// HINT: This is the dedicated function for Complete Payment
        	function completePayment() {

			  window.dataLayer.push({ ecommerce: null });  // Clear the previous ecommerce object.
			  window.dataLayer.push({
			    'event': 'checkout',
			    'ecommerce': {
			      'checkout': {
				'products': [{
				  'name': 'Product 1',
				  'id': '5678AB',
				  'category': 'Kids',
				  'quantity': 1,
				  'price': '29.99'
			       	},
				{
				  'name': 'Product 2',
				  'id': '6521FJ',
				  'category': 'Kids',
				  'quantity': 1,
				  'price': '49.99'
			       	}	    
				],
				value: 279.97,
				currency: 'AUD'
			     }
			   }
			  });
			       
			
        		// BEGIN DO NOT EDIT SECTION 
        		alert("Payment Completed - Purchase Successful")
        		// END DO NOT EDIT SECTION 
        	}
        </script>
        <!-- END TIKTOK PIXEL EVENT FUNCTIONS SCRIPT SECTION -->

        <!-- BEGIN STYLING SECTION - DO NOT EDIT -->
		<style type="text/css">

		h1 + div {
			padding-left: 370px;
		}

		div {
			padding: 10px;
		}

		table {
			padding-bottom: 20px;
		}

		footer {
			padding: 10px;
		}

		.box {
			box-sizing: content-box;    
			width: 200px;
			height: 180px;
			padding: 20px;    
			border: 2px solid black;
			text-align: center;
            }

		.cart {		
			float: right;
		}

		.content {
			max-width: 800px;
			margin: auto;
		}

		.title {
			display: inline-block;
		}

		#cart-items {
			border: 0;
		}
    	</style>
    	<!-- END STYLING SECTION - DO NOT EDIT -->

	</body>
</html>
